# ============================================================================
# FAST PIN PON - Environment Configuration
# ============================================================================
# Variables used by docker-compose.prod.yml
# ============================================================================
APP_NAME=fast-pin-pon-api
APP_ENV=development
LOG_LEVEL=info
# ---------------------------------------------------------------------------
# PRIMARY DATABASE - PostgreSQL (with PostGIS)
# ---------------------------------------------------------------------------
DB_NAME=fastpinpon
DB_USER=fastpinpon
DB_PASSWORD=*********************
DB_URL=postgres://${DB_USER}:${DB_PASSWORD}@postgres:5432/${DB_NAME}?sslmode=disable
DB_RUN_MIGRATIONS=true
DB_MIGRATIONS_DIR=migrations

# ---------------------------------------------------------------------------
# KEYCLOAK - Identity & Access Management (Auth Server)
# ---------------------------------------------------------------------------

# Keycloak Server Configuration
KC_HOSTNAME=localhost
KEYCLOAK_URL=http://fast-pin-pon-keycloak:8080
KEYCLOAK_PUBLIC_URL=https://auth.fast-pin-pon.4loop.org

# Keycloak Database (separate PostgreSQL instance)
KC_DB=postgres
KC_POSTGRES_DB=keycloak
KC_POSTGRES_USER=keycloak
KC_DB_URL=jdbc:postgresql://keycloakdb:5432/keycloak
KC_POSTGRES_PASSWORD=***************


# Bootstrap Admin Credentials (used only on first startup)
KC_BOOTSTRAP_ADMIN_USERNAME=Fast
KC_BOOTSTRAP_ADMIN_PASSWORD=***************

# Admin User Profile
MY_ADMIN_EMAIL=admin@localhost
MY_ADMIN_FNAME=Fast
MY_ADMIN_LNAME=And Curious

# Keycloak Realm & Client Configuration
KEYCLOAK_REALM=sdmis-realm
KEYCLOAK_CLIENT_ID=sdmis-api
KEYCLOAK_CLIENT_SECRET=********************

# Password for all users created during initial data seeding
PASSWORD_USER=***************

# ---------------------------------------------------------------------------
# GRAFANA - Monitoring & Dashboarding
# ---------------------------------------------------------------------------

# Grafana Admin Credentials
GF_SECURITY_ADMIN_USER=Fast
GF_SECURITY_ADMIN_PASSWORD=****************************

# Grafana Plugins
PACKAGE_PLUGINS_GRAFANA=grafana-clock-panel,grafana-simple-json-datasource

# Grafana OAuth2 SSO Configuration (Keycloak)
GF_AUTH_GENERIC_OAUTH_ENABLED=true
GF_AUTH_GENERIC_OAUTH_NAME=Keycloak
GF_AUTH_GENERIC_OAUTH_ALLOW_SIGN_UP=true

# OAuth2 Client Credentials
GF_AUTH_GENERIC_OAUTH_CLIENT_ID=grafana
GRAFANA_SSO=**********
GF_AUTH_GENERIC_OAUTH_SCOPES=openid profile email

# OAuth2 Endpoints
GF_AUTH_GENERIC_OAUTH_AUTH_URL=http://localhost:8082/realms/sdmis-realm/protocol/openid-connect/auth
GF_AUTH_GENERIC_OAUTH_TOKEN_URL=http://fast-pin-pon-keycloak:8080/realms/sdmis-realm/protocol/openid-connect/token
GF_AUTH_GENERIC_OAUTH_API_URL=http://fast-pin-pon-keycloak:8080/realms/sdmis-realm/protocol/openid-connect/userinfo

# OAuth2 Role Mapping
GF_AUTH_GENERIC_OAUTH_ROLE_ATTRIBUTE_PATH="contains(realm_access.roles[*], 'admin') && 'Admin' || 'Viewer'"